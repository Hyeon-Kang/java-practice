import java.awt.*;
import java.awt.event.*;
import java.applet.*;
import java.sql.*;
import java.util.StringTokenizer;

public class AppletEx1 extends Applet implements ActionListener{
/*	Choice search; //°Ë»ö Á¶°Ç ¼±ÅÃ¹Ú½º ¼±¾ğ
	Choice option; //±â´É ¼±ÅÃ ¹Ú½º ¼±¾ğ
*/
	//Label label;

<<<<<<< HEAD
	Label lname; //¶óº§ ¼±¾ğ
	Label lage;
	Label lid;
	Label lpass;
	Label lmail;
	Label lphone;

	//TextField textField;

	TextField tname; //°ªÀ» ÀÔ·Â¹ŞÀ» ÅØ½ºÆ® ÇÊµå ¼±¾ğ
	TextField tage;
	TextField tid;
	TextField tpass;
	TextField tmail;
	TextField tphone;

	
	TextArea Area; //°á°ú °ªÀ» Ãâ·ÂÇÒ ÅØ½ºÆ® ¿¡¸®¾î ¼±¾ğ
	Button button; //ÀÔ·Â¹öÆ° ¼±¾ğ
=======
public class AppletTest extends Applet implements ActionListener{
	Choice search; //ê²€ìƒ‰ ì¡°ê±´ ì„ íƒë°•ìŠ¤ ì„ ì–¸
	Label label; //ë¼ë²¨ ì„ ì–¸
	TextField textField; //ê°’ì„ ì…ë ¥ë°›ì„ í…ìŠ¤íŠ¸ í•„ë“œ ì„ ì–¸
	TextArea Area; //ê²°ê³¼ ê°’ì„ ì¶œë ¥í•  í…ìŠ¤íŠ¸ ì—ë¦¬ì–´ ì„ ì–¸
	Button button; //ê²€ìƒ‰ë²„íŠ¼ ì„ ì–¸
>>>>>>> 6a2fababb3697996133c69b26731bd191a20ff63


private String url = "jdbc:inetdae7://210.115.229.77:2433";
// ì£¼ì†Œ ê°’ ì €ì¥ ë³€ìˆ˜, JDBCì˜ merliaë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— inetdae7ì„ ì‚¬ìš©.
private String user = "20155204";
// ID ê°’ ì €ì¥ ë³€ìˆ˜
private String pass = "password";   ////(ë³€ê²½ í•„ìš”)
// PW ê°’ ì €ì¥ ë³€ìˆ˜


//JDBC ë“œë¼ì´ë²„ ë¡œë”©
public void init() {
	try{
		Class.forName("com.inet.tds.TdsDriver");
	}
	catch(ClassNotFoundException e) {
		System.out.println("Class Loading Failed");
		//ë¡œë”© ì‹¤íŒ¨ì‹œ ì¶œë ¥ ë©”ì‹œì§€
	}
}

<<<<<<< HEAD

//Interface ¼³Á¤
public void start() {
	setLayout(new FlowLayout()); // ·¹ÀÌ¾Æ¿ô ¹èÄ¡ÀÚ
	
	lname = new Label("ÀÌ ¸§"); // ¾È³»¹®±¸
	add(lname);
	tname = new TextField(10);
	add(tname);
	
	lage = new Label("³ª ÀÌ");
	add(lage); // ¶óº§Ãß°¡
	tage = new TextField(10);
	add(tage);
	
	lid = new Label("ID");
	add(lid);
	tid = new TextField(10);
	add(tid);
	
	lpass = new Label("password");
	add(lpass);
	tpass = new TextField(10);
	add(tpass);
	
	lmail = new Label("e-mail");
	add(lmail);
	tmail = new TextField(10);
	add(tmail);
	
	lphone = new Label("phone");
	add(lphone);
	tphone = new TextField(10);
	add(tphone);

=======
//ì¸í„°í˜ì´ìŠ¤ êµ¬ì„±
public void start() {
	setLayout(new FlowLayout()); // ë ˆì´ì•„ì›ƒ ë°°ì¹˜ì
	label = new Label("ì‘ì—… ì„ íƒ"); // ì•ˆë‚´ë¬¸êµ¬
	add(label); // ë¼ë²¨ì¶”ê°€

	
	search = new Choice(); //ì„ íƒ (ì²´í¬ë°•ìŠ¤)
	search.add("--");
	search.add("ì „ì²´"); // ì „ì²´ ì…‹
	search.add("ì´ë¦„"); // ì´ë¦„ ì…‹
	search.add("ë‚˜ì´"); // ë‚˜ì´ ì…‹
	search.add("ì„±ë³„"); // ì„±ë³„ ì…‹
	search.add("--");  					////
	search.add("ì‚½ì…");
	search.add("ì‚­ì œ");
	search.add("ê°±ì‹ ");
	add(search); // ì„ íƒë°•ìŠ¤ ì¶”ê°€
	

	textField = new TextField(10); //í…ìŠ¤íŠ¸ í•„ë“œ ê°ì²´ ìƒì„±(ê²€ìƒ‰ì–´ ì…ë ¥ ì˜ì—­)
	add(textField);// í…ìŠ¤íŠ¸ í•„ë“œ ì¶”ê°€(ê²€ìƒ‰ì–´ ì…ë ¥ ì˜ì—­)
	button = new Button("search"); //"search" ë²„íŠ¼ ì¶”ê°€
	add(button);
	Area = new TextArea(10,50); //í…ìŠ¤íŠ¸ ì—ë¦¬ì–´ ì¶”ê°€
	add(Area);
	button.addActionListener(this); // ë²„íŠ¼ ì•¡ì…˜ ì§€ì •.
}

//Action event handle (ì¿¼ë¦¬ ì„ íƒ)
public void actionPerformed(ActionEvent ae) {
	Connection con = null;
	//ì»¤ë„¥ì…˜ ê°ì²´ ì´ˆê¸°í™”
	Statement stmt = null;
	//ìŠ¤í…Œì´íŠ¸ë¨¼íŠ¸ ê°ì²´ ì´ˆê¸°í™”
	
	String st = ae.getActionCommand();
	//ë¬¸ìì—´ ë³€ìˆ˜ stì—  ActionEvent ì¸ì ë‚´ìš© ì €ì¥.
	String item = search.getSelectedItem();
	//ë¬¸ìì—´ ë³€ìˆ˜ itemì— searchì„ íƒë°•ìŠ¤ì˜ ì„ íƒ ì•„ì´í…œ ë¬¸ìì—´ ì €ì¥.
	
	//search ë‚´ìš© ì„ íƒ ê°’ì— ë”°ë¥¸ ë¶„ê¸° ë°œìƒ
	if(st.equals("search")) {
		String n = textField.getText();
		//ë¬¸ìì—´ ë³€ìˆ˜ nì— í…ìŠ¤íŠ¸ í•„ë“œì˜ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°
		
		//ì „ì²´ ì„ íƒ
		if(item.equals("--")) {}
		
		else if(item.equals("ì „ì²´")) //ì„ íƒë°•ìŠ¤ì—ì„œ ì „ì²´ ì„ íƒ
		{
			TotalgetDBSearch(); //ì „ì²´ ê²€ìƒ‰ ë©”ì†Œë“œ í˜¸ì¶œ
		}
	
	
		//ì´ë¦„ ì„ íƒ
		else if(item.equals("ì´ë¦„")) //ì„ íƒë°•ìŠ¤ì—ì„œ ì´ë¦„ ì„ íƒ
		{
			NamegetDBSearch(n); //ì´ë¦„ ê²€ìƒ‰ ë©”ì†Œë“œ í˜¸ì¶œ
		}
		
		//ë‚˜ì´ ì„ íƒ
		else if(item.equals("ë‚˜ì´")) //ì„ íƒë°•ìŠ¤ì—ì„œ ë‚˜ì´ ì„ íƒ
		{
			AgeSearch(n); //ë‚˜ì´ ê²€ìƒ‰ ë©”ì†Œë“œ í˜¸ì¶œ
		}
		
		//ì„±ë³„ ì„ íƒ
		else if(item.equals("ì„±ë³„")) //ì„ íƒë°•ìŠ¤ì—ì„œ ì „ì²´ ì„ íƒ
		{
			SexSearch(n); //ì „ì²´ ê²€ìƒ‰ ë©”ì†Œë“œ í˜¸ì¶œ
		}
		
		//ì‚½ì… ì˜µì…˜
		if(item.equals("ì‚½ì…")) {
				
			Insert(n); //ì‚½ì… í•¨ìˆ˜ì— ë¬¸ìì—´ n ë„£ì–´ ì‹¤í–‰
		}
		
		//ì‚­ì œ ì˜µì…˜
		else if(item.equals("ì‚­ì œ")) {
					
			nameDelete(n); // ì‚­ì œí•¨ìˆ˜ ì‹¤í–‰
		}		
		
		//ê°±ì‹  ì˜µì…˜
		else if(item.equals("ê°±ì‹ ")) {
					
		}
		
	}
	

}


//ë¬¸ìì—´ ìŠ¤í”Œë¦¿ ë©”ì„œë“œ
>>>>>>> 6a2fababb3697996133c69b26731bd191a20ff63

	button = new Button("ÀÔ·Â");
	add(button);
	button.addActionListener(this);
}


<<<<<<< HEAD
//Action event handle (Äõ¸® ¼±ÅÃ)
public void actionPerformed(ActionEvent ae) {
	Connection con = null;
	Statement stmt = null;
	
	String st = ae.getActionCommand();
	
	String n = tname.getText();
	//String a = tage.getText();
	int a = Integer.parseInt(tage.getText()); //¹®ÀÚ¿­À» Á¤¼ö·Î º¯È¯
	String i = tid.getText();
	String p = tpass.getText();
	String e = tmail.getText();
	String ph = tphone.getText();
	
	Insert1(n, a, i, p, e, ph);
}


//µ¥ÀÌÅÍ »ğÀÔ ¸Ş¼Òµå
private void Insert1(String n, int a, String i, String p, String e, String ph) {
=======


//ì „ì²´ê²€ìƒ‰ ë©”ì†Œë“œ
private void TotalgetDBSearch() {
	Connection con = null;
	Statement stmt = null;
	
	try {
		con = DriverManager.getConnection(url, user, pass);
		con.setCatalog("20155204"); //DBNAME ì…ë ¥(ìµœìƒìœ„ í…Œì´ë¸” ë¬¶ìŒ)
		stmt = con.createStatement();
		
		ResultSet result = stmt.executeQuery("SELECT * FROM customer");
		
		String count = Area.getText();
		int c = count.length();
		Area.replaceText(" ", 0, c);

		Area.setText("ì „ì²´ê²€ìƒ‰ ê²€ìƒ‰ ...\n"); //ì•ˆë‚´ë¬¸êµ¬ ì¶œë ¥
		
		while(result.next()) //ìˆœì°¨ë¡œ ì½ã…‡
		{
			String Name = result.getString(1);
			String age = Integer.toString(result.getInt(2));
			String sex = result.getString(3);
			
			String value = "ì´ë¦„ : " + Name + " ë‚˜ì´ : " + age+ " ì„±ë³„ : "+ sex + "\n";
			int index = Area.getText().length();
			Area.insertText(value, index);
		}
		con.close();
		stmt.close();
		}
	catch(Exception ee) {System.out.println(ee);}
		
	}//try end


// ì´ë¦„ ê²€ìƒ‰ì˜ ì§ˆì˜ì²˜ë¦¬í™”
private void NamegetDBSearch(String n)//ì´ë¦„ ê²€ìƒ‰
// ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë¦„ì„ ê°’ìœ¼ë¡œ ë°›ëŠ”ë‹¤.
{
	Connection con = null; //ì‚¬ìš©í•  ì—°ê²° ì´ˆê¸°í™”
	Statement stmt = null; //stmt ê°ì²´ ì´ˆê¸°í™”
	try
	{
		con = DriverManager.getConnection(url, user, pass); //ë“œë¼ì´ë²„ ë§¤ë‹ˆì € ì ‘ì† ì •ë³´ ì…ë ¥
		con.setCatalog("20155204"); // ì ‘ì† í…Œì´ë¸” ê²½ë¡œ(ìµœìƒìœ„ ê²½ë¡œ)
		stmt = con.createStatement(); 
		
		ResultSet result = stmt.executeQuery("SELECT * FROM customer WHERE name = '"+n+"'"); //ë’¤ì— ì…ë ¥ ìŠ¤íŠ¸ë§ ë¶™ì´ê¸°

		String count = Area.getText();
		int c = count.length();
		Area.replaceText(" ", 0, c);

		Area.setText("ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ ...\n"); //ì•ˆë‚´ë¬¸êµ¬ ì¶œë ¥
		while(result.next()) //ìˆœì°¨ë¡œ ì½ã…‡
		{
			String Name = result.getString(1);
			String age = Integer.toString(result.getInt(2));
			String sex = result.getString(3);
			
			String value = "ì´ë¦„ : " + Name + " ë‚˜ì´ : " + age+ " ì„±ë³„ : "+ sex + "\n";
			int index = Area.getText().length();
			Area.insertText(value, index);
		}
		con.close();
		stmt.close();
		//ì‘ì—… ì¢…ë£Œ ë° ê³µê°„ í™•ë³´
	}
	
	
	catch(SQLException se) {
		System.err.println(se.getMessage());
		//ì˜¤ë¥˜ ë°œìƒ ì‹œ ë©”ì‹œì§€ ì¶œë ¥
	}
}





//ë‚˜ì´ ê²€ìƒ‰ì˜ ì§ˆì˜ ì²˜ë¦¬í™”
private void AgeSearch(String num)//ë‚˜ì´ ê²€ìƒ‰
//ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë‚˜ì´ë¥¼ ê°’ìœ¼ë¡œ ë°›ëŠ”ë‹¤.
{
	Connection con = null; //ì‚¬ìš©í•  ì—°ê²° ì´ˆê¸°í™”
	Statement stmt = null; //stmt ê°ì²´ ì´ˆê¸°í™”
	try
	{
		con = DriverManager.getConnection(url, user, pass); //ë“œë¼ì´ë²„ ë§¤ë‹ˆì € ì ‘ì† ì •ë³´ ì…ë ¥
		con.setCatalog("20155204"); // ì ‘ì† í…Œì´ë¸” ê²½ë¡œ(ìµœìƒìœ„ ê²½ë¡œ)
		stmt = con.createStatement(); 
		
		ResultSet result = stmt.executeQuery("SELECT * FROM customer WHERE age = "+num); //ë’¤ì— ì…ë ¥ ìŠ¤íŠ¸ë§ ë¶™ì´ê¸°

		String count = Area.getText();
		int c = count.length();
		Area.replaceText(" ", 0, c);
		
		while(result.next()) //ìˆœì°¨ë¡œ ì½ã…‡
		{
			String Name = result.getString(1);
			String age = Integer.toString(result.getInt(2));
			String sex = result.getString(3);
			
			String value = "ì´ë¦„ : " + Name + " ë‚˜ì´ : " + age+ " ì„±ë³„ : "+ sex + "\n";
			int index = Area.getText().length();
			Area.insertText(value, index);
		}
		con.close();
		stmt.close();
		//ì‘ì—… ì¢…ë£Œ ë° ê³µê°„ í™•ë³´
		//ì‘ì—… ì¢…ë£Œ ë° ê³µê°„ í™•ë³´
	}
	
	
	catch(SQLException se) {
		System.err.println(se.getMessage());
		//ì˜¤ë¥˜ ë°œìƒ ì‹œ ë©”ì‹œì§€ ì¶œë ¥
	}
}








//ì„±ë³„ ê²€ìƒ‰ì˜ ì§ˆì˜ ì²˜ë¦¬í™”
private void SexSearch(String s)//ë‚˜ì´ ê²€ìƒ‰
//ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë‚˜ì´ë¥¼ ê°’ìœ¼ë¡œ ë°›ëŠ”ë‹¤.
{
	Connection con = null; //ì‚¬ìš©í•  ì—°ê²° ì´ˆê¸°í™”
	Statement stmt = null; //stmt ê°ì²´ ì´ˆê¸°í™”
	try
	{
		con = DriverManager.getConnection(url, user, pass); //ë“œë¼ì´ë²„ ë§¤ë‹ˆì € ì ‘ì† ì •ë³´ ì…ë ¥
		con.setCatalog("20155204"); // ì ‘ì† í…Œì´ë¸” ê²½ë¡œ(ìµœìƒìœ„ ê²½ë¡œ)
		stmt = con.createStatement(); 
		
		ResultSet result = stmt.executeQuery("SELECT * FROM customer WHERE sex = '"+s+"'"); //ë’¤ì— ì…ë ¥ ìŠ¤íŠ¸ë§ ë¶™ì´ê¸°

		String count = Area.getText();
		int c = count.length();
		Area.replaceText(" ", 0, c);

		
		while(result.next()) //ìˆœì°¨ë¡œ ì½ã…‡
		{
			String Name = result.getString(1);
			String age = Integer.toString(result.getInt(2));
			String sex = result.getString(3);
			
			String value = "ì´ë¦„ : " + Name + " ë‚˜ì´ : " + age+ " ì„±ë³„ : "+ sex + "\n";
			int index = Area.getText().length();
			Area.insertText(value, index);
		}
		con.close();
		stmt.close();
		//ì‘ì—… ì¢…ë£Œ ë° ê³µê°„ í™•ë³´
		//ì‘ì—… ì¢…ë£Œ ë° ê³µê°„ í™•ë³´
	}
	 
	
	catch(SQLException se) {
		System.err.println(se.getMessage());
		//ì˜¤ë¥˜ ë°œìƒ ì‹œ ë©”ì‹œì§€ ì¶œë ¥
	}
}





//private void Insert(String name, String age, String sex)
//ë°ì´í„° ì‚½ì… ë©”ì†Œë“œ
private void Insert(String n) {
>>>>>>> 6a2fababb3697996133c69b26731bd191a20ff63
	try {
		Connection con;
		Statement stmt;
		//Connection ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ DBì— ì—°ê²°ì„ ì„¤ì •
		con = DriverManager.getConnection(url, user, pass);
		con.setCatalog(user);
		//ì§ˆì˜ë¬¸ ì‘ì„±ì„ ìœ„í•œ statement ê°ì²´ ìƒì„±
		stmt = con.createStatement();
		
		
<<<<<<< HEAD
		//»ı¼ºµÈ Å×ÀÌºí¿¡ °ªÀ» »ğÀÔ
		stmt.executeQuery("INSERT INTO hallym VALUES('"+n+"',"+ a +",'" + i + "','" + p+ "','" +e+ "','" + ph +"')");
		
=======
		
		// ë¬¸ìì—´ parsing
		int i = 0;
		String []arr = new String[3];
		StringTokenizer token =new StringTokenizer(n,",");
			while(token.hasMoreTokens()) {
			arr[i] = token.nextToken();
			i++;
			}
		
		String name = arr[0];
		String age = arr[1];
		String sex = arr[2];
		
		//ìƒì„±ëœ í…Œì´ë¸”ì— ê°’ì„ ì‚½ì…
		stmt.executeQuery("INSERT INTO customer VALUES('"+ name +"'," +age +",'"+ sex +"')");
		
		String count = Area.getText();
		int c = count.length();
		Area.replaceText(" ", 0, c);
		
		Area.insertText("\nInsert Complete.\n", 0); //ì˜¤ë¥˜ê°€ ëœ¨ì§€ë§Œ ì¿¼ë¦¬ëŠ” ì‘ë™í•œë‹¤. ì˜¤ë¥˜ë•Œë¬¸ì— ì´í•˜ ë¬¸êµ¬ ì¶œë ¥ì´ ì•ˆ ë˜ëŠ”ê±° ê°™ìŒ.
		//í…ìŠ¤íŠ¸ area ì´ˆê¸°í™”

>>>>>>> 6a2fababb3697996133c69b26731bd191a20ff63
		
		//ì‘ì—… ì¢…ë£Œ í›„ statement, connection ê°ì²´ ë‹«ê¸°
		stmt.close();
		con.close();
		
		
	}
	catch(SQLException se) {
		System.err.println(se.getMessage());
		
		//ì˜¤ë¥˜ ë©”ì‹œì§€ ê²€ì¶œ
	}
}

}//AppletEx1 end

<<<<<<< HEAD
=======
//ë°ì´í„° ì‚­ì œ ë©”ì†Œë“œ
void nameDelete(String r) {
	
	try {
		Connection con;
		Statement stmt;
		con = DriverManager.getConnection(url, user, pass);
		con.setCatalog("20155204");
		
		stmt = con.createStatement();
		//ì—°ê²°ëœ DBë¬¸ì—ì„œ ì§ˆì˜ë¬¸ ì‘ì„±ì„ ìœ„í•œ ê°ì²´ ìƒì„±
		
		stmt.executeQuery("delete FROM customer WHERE name = '"+r+"'");
		//ì¿¼ë¦¬ë¬¸

		//í…ìŠ¤íŠ¸ area ì´ˆê¸°í™”
	/*	String count = Area.getText();
		int c = count.length();
		Area.replaceText(" ", 0, c);
		*/
		
		Area.setText("Delete Complete.");
		
		//ì¢…ë£Œ ë° ê³µê°„í™•ë³´ ì‹œì‘
		stmt.close();
		con.close();

	}
	catch(SQLException se) {
		System.err.println(se.getMessage());
	}
}//ì‚­ì œ ë©”ì†Œë“œ ì¢…ë£Œ


//ê°±ì‹  ë©”ì†Œë“œ (ê°±ì‹  ì‹œ ë§ˆë‹¤ ë‚˜ì´ 1ì”© ì¶”ê°€)


}// ì „ì²´ ì¢…ë£Œ
>>>>>>> 6a2fababb3697996133c69b26731bd191a20ff63
